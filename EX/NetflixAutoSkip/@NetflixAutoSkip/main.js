const browser = self.browser || self.chrome; const arasujiSkip = onElementCreated("#appMountPoint > div > div > div > div > div.watch-video > div > div > div.default-ltr-iqcdef-cache-1m81c36 > div.watch-video--skip-content.default-ltr-iqcdef-cache-gpipej > button", (btn) => {humanClick(btn); }); const introSkip = onElementCreated("div > div.watch-video--skip-content.default-ltr-iqcdef-cache-gpipej > button", (btn) => {humanClick(btn); }); const keepWatching = onElementCreated("#appMountPoint > div > div > div > div > div.watch-video > div > div > div.watch-video--interrupt-autoplay.default-ltr-iqcdef-cache-1m81c36 > div > div > button:nth-child(1)", (btn) => {humanClick(btn); }); browser.storage.onChanged.addListener((changes, area) => {if (area !== 'local') return;if ("toggleSkipState" in changes) { if (changes.toggleSkipState.newValue) {arasujiSkip.start();introSkip.start(); } else {arasujiSkip.stop();introSkip.stop(); }} else {if (changes.toggleWatchState.newValue) {keepWatching.start(); } else {keepWatching.stop(); }} }); browser.storage.local.get({ toggleSkipState: false, toggleWatchState: false},result => { if (result.toggleSkipState) {arasujiSkip.start();introSkip.start(); } else {arasujiSkip.stop();introSkip.stop(); } if (result.toggleWatchState) {keepWatching.start(); } else {keepWatching.stop(); }} );