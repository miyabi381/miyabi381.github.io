const browser = self.browser || self.chrome; document.addEventListener('DOMContentLoaded', () => { const toggleSkip = document.getElementById('toggleSkip'); const toggleWatch = document.getElementById('toggleWatch'); browser.storage.local.get( { toggleSkipState: false, toggleWatchState: false }, result => { toggleSkip.checked = result.toggleSkipState; toggleWatch.checked = result.toggleWatchState; } ); toggleSkip.addEventListener('change', async () => { const isOn = toggleSkip.checked; browser.storage.local.set({ toggleSkipState: isOn }); }); toggleWatch.addEventListener('change', async () => { const isOn = toggleWatch.checked; browser.storage.local.set({ toggleWatchState: isOn }); }); });